Настройка и использование CDR-Stats.
CDR-Stats является как многопользовательские в том, что многие пользователи могут просматривать только свои CDR, основанный на accountcode. Кроме того, CDR-статистика может показать и сообщить статистические данные от многих серверов телефонии, либо индивидуально, либо агрегированные статистические данные.

Для использования CDR-Stats, перейдите к http:// << IP-адрес вашего сервера >>: 8008 и войти в систему с именем пользователя и пароль, введенные во время установки.

NB: В установках, которые Iptables установлен и настроен, доступ должен быть разрешен на порт 8008 TCP. Добавьте следующую строку в Iptables, как правило, после того, как правило, разрешающее доступ HTTP, порт 80. В CentOS, правила брандмауэра можно найти в / и т.д. / sysconfig / Iptables. Выпуск Iptables перезапуска службы , чтобы применить правило.

-A INPUT-р TCP-м TCP-DPORT 8008-J ACCEPT

Страна отчетности
CDR-Stats в состоянии идентифицировать страны назначения вызова. Это полезная мера предотвращения мошенничества, так что звонки на неожиданные назначения находятся сразу. Места, которые не следует называть должны быть добавлены в черный список в разделе администратора, так что эти направления будут выделены в вызове записи данных.

Однако, для того, чтобы получить точные отчеты, записи вызовов подробно должны быть в международном формате, например, в США, это означает, что 11-значный номер, начиная с 1, и для других стран, цифры называются должно начинаться с международным набрать код.

Существует объект для манипулирования набранных цифр сообщили в записи деталей вызова, а также определения вызовы, как внутренние вызовы. Это делается в разделе "Общие" в / USR / доли / CDR-статистика / settings_local.py.

PHONENUMBER_PREFIX_LIMIT_MIN и PHONENUMBER_PREFIX_LIMIT_MAX используются для определения, сколько цифр используется для сравнения dialcode префикс базы данных, например, PHONENUMBER_PREFIX_LIMIT_MIN = 2 = 5 PHONENUMBER_PREFIX_LIMIT_MAX


Если телефон имеет меньше цифр, чем PHONENUMBER_MIN_DIGITS оно будет рассмотрено расширение.

PHONENUMBER_MIN_DIGITS = 6
= 9 PHONENUMBER_MAX_DIGITS

Если телефон имеет больше цифр, чем PHONENUMBER_DIGITS_MIN но меньше, чем PHONE_DIGITS_MAX затем номер телефона, будет считаться местным или национальным вызовом и LOCAL_DIALCODE будет добавлен.

LOCAL_DIALCODE = 1

Установить dialcode вашей страны (44 в Великобритании, 1 для США)

PREFIX_TO_IGNORE = "+, 0,00,000,0000,00000,011,55555,99999"

Список префиксов игнорировать, эти префиксы будут удалены из телефонного номера до анализа.

Примеры
Таким образом, для США, чтобы справиться с 10 или 11-значный набор номера, PHONENUMBER_MAX_DIGITS должен быть установлен на 10, а LOCAL_DIALCODE устанавливается в 1. Таким образом, 10-значный номер будет иметь 1 добавлено, но 11 цифр остаются нетронутыми.

В Великобритании количество значащих цифр, либо 9 или 10, после того, как "0" ствол код. Таким образом, чтобы убедиться, что все британские номера было 44 приставкой к ним и одним ведущим удалено 0, префиксы, которые игнорируют будет включать 0, PHONENUMBER_MAX_DIGITS должен быть установлен на 10, а LOCAL_DIALCODE бы 44.

В Испании, где нет "0" ствол код, а длина всех чисел 9, то PHONENUMBER_MAX_DIGITS будет установлен в 9, а LOCAL_DIALCODE установлен в 34.

Примечание:  После изменения этого файла, то оба сельдерея и Apache должен быть перезапущен.

Оповещения
E-mail оповещения можно настроить в разделе Сигнализации администратора страниц. Нажмите кнопку Добавить, сигнализация, затем настроить оповещения вам требуется. Два условия оповещения можно настроить: -

Aloc - Средняя продолжительность вызова. Это может свидетельствовать о мошеннической деятельности или проблемы со стволом.
ASR - Ответ Seize Ratio. Это соотношение между количеством звонков от количества звонков ответил. Низкие значения ASR может быть вызван провал ствола к одному или нескольким направлениям.
При настройке, CDR-Stats можете отправить получателю уведомление.

Добавление новых коммутаторов
Несколько коммутаторов могут быть добавлены передать свои CDR для CDR-Stats. Это устанавливается в двух местах, в / USR / доли / CDR-статистика / settings_local.py, а в переключателей под CDR в Админ-страниц.

На момент написания статьи, CDR-Stats поддерживает автоматический импорт CDR либо звездочки MySQL CDR магазине или на FreeSWITCH, через модуль mod_cdr_mongodb. Настройки для подключения к CDR магазины находятся в / USR / доли / CDR-статистика / settings_local.py. Они должны быть правильно настроен во время установки скрипта.

Звездочка
Звездочка настройки могут быть следующие: -

ASTERISK_CDR_MYSQL_IMPORT = {
     '127 .0.0.1 ': {
          'db_name': 'asteriskcdrdb',
          'table_name': 'корд ",
          "хозяин": "локальный",
           "пользователь": "корень",
           "пароль": "passw0rd,
     }
     # .168.1.200 '192 ': {
          # 'db_name': 'asteriskcdrdb',
          # 'table_name': 'CDR,
          # 'хост: локальный', ''
          # 'пользователя': 'корень',
          # 'пароль' : «passw0rd,
     #},
}

Чтобы добавить новый удаленный MySQL Asterisk CDR-магазине, вы бы обеспечить подключение к удаленной базе данных MySQL, то раскомментируйте новые настройки сервера, удаляя # и настройке учетных данных для подключения к удаленным Asterisk CDR магазина.

FreeSWITCH
FreeSWITCH настройки в разделе CDR_MONGO_IMPORT, и должна выглядеть следующим образом:

# Установка MongoDB (ы), используемый для импорта

    CDR_MONGO_IMPORT = {
        ’127.0.0.1′: {
            ‘db_name’: ‘freeswitch_cdr’,
            ‘host’: ‘localhost’,
            ‘port’: 27017,
            ‘collection’: ‘cdr’,
        },
        #’192.168.1.15′: {
            # ‘db_name’: ‘freeswitch_cdr’,
            # ‘host’: ’192.168.1.15′,
            # ‘port’: 27017,
            # ‘collection’: ‘cdr’,
    #},
    }

Для подключения новой системы FreeSWITCH на CDR-Stats, вы должны убедиться, что порт 27017 TCP  открыт только
для сервера CDR-статистики сервера на удаленной системе, раскомментируйте настройки, удалив #, а затем настроить IP-адрес и db_name, чтобы соответствовать те, в mod_cdr_mongodb конфигурации, как описано в  http://www.cdr-stats.org/documentation/beginners-guide/howto-installing-on-freeswitch/

Примечание:  После изменения этого файла, то оба сельдерея и Apache должен быть перезапущен.

Импорт CDR
Администратор может импортировать записи Call Detail от третьего переключателя партии. для запросов и анализа.

Есть целый ряд полей, которые должны быть импортированы, а также необязательные поля. Если установка была сделана на FreeSWITCH, только после CDR CDR-Stats установки будет отображаться. Эта функция может быть использована для принести в историческом CDR.

Клиенты и пользователи
Новые пользователи могут быть добавлены, кто может видеть только вызов записи данных, связанных с их счета. Они получают свою входа в систему, и только иметь доступ к отчетности inteface.

Если есть какие-либо вопросы или проблемы, пожалуйста, подпишитесь на рассылку на http://groups.google.com/group/cdr-stats